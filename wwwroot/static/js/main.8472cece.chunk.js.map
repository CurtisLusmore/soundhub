{"version":3,"sources":["ConnectionContext.js","ConnectionStatus.jsx","Button.jsx","SoundBoard.jsx","App.jsx","index.js","Connection.js"],"names":["ConnectionContext","React","createContext","ConnectionStatus","props","state","room","roomState","get","onChange","bind","ev","target","value","this","setState","connection","preventDefault","set","connect","status","Consumer","class","onSubmit","submit","type","placeholder","autoFocus","Component","Button","icon","src","button","createRef","audio","onPlay","elem","current","classList","add","clearTimeout","bouncer","setTimeout","remove","play","ref","id","onClick","send","App","onConnecting","onConnected","onDisconnect","Provider","playHandlers","connectingHandler","connectedHandler","disconnectedHandler","fx","invoke","action","callback","HubConnectionBuilder","withUrl","build","on","console","log","onclose","start","then","catch","error","message","window","location","hash","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8472cece.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst ConnectionContext = React.createContext(() => {});\r\n\r\nexport default ConnectionContext;\r\n","import React from 'react';\r\nimport ConnectionContext from './ConnectionContext';\r\nimport './ConnectionStatus.css';\r\n\r\nexport default class ConnectionStatus extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      room: props.roomState.get(),\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange(ev) {\r\n    const room = ev.target.value;\r\n    this.setState({ room });\r\n  }\r\n\r\n  submit(ev, connection) {\r\n    ev.preventDefault();\r\n    const { roomState } = this.props;\r\n    const { room } = this.state;\r\n\r\n    roomState.set(room);\r\n    connection.connect(room);\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const { status } = this.props;\r\n    const { room } = this.state;\r\n    return <ConnectionContext.Consumer>{connection => {\r\n      return <div class=\"status\">{\r\n        status === 'connecting'\r\n          ? <p>ü§ù Connecting...</p>\r\n          : <form onSubmit={ev => this.submit(ev, connection)}>\r\n              <input type=\"text\" placeholder=\"Room\" value={room} onChange={this.onChange} autoFocus />\r\n              <input type=\"submit\" value=\"üëã Connect\" />\r\n          </form>\r\n      }</div>\r\n    }}</ConnectionContext.Consumer>;\r\n  }\r\n};","import React from 'react';\r\nimport ConnectionContext from './ConnectionContext';\r\n\r\nconst bounce = function (elem) {\r\n  elem.classList.add('bounce');\r\n  clearTimeout(elem.bouncer);\r\n  elem.bouncer = setTimeout(function () { elem.classList.remove('bounce'); }, 500);\r\n};\r\n\r\nconst Button = function ({ icon, src }) {\r\n  return <ConnectionContext.Consumer>{function (connection) {\r\n    const button = React.createRef();\r\n    const audio = React.createRef();\r\n    connection.onPlay(icon, function () {\r\n      bounce(button.current);\r\n      audio.current.play();\r\n    });\r\n    return <>\r\n      <span ref={button} class=\"button\" id={`${icon}-button`} onClick={() => connection.send(icon)}>{icon}</span>\r\n      <audio ref={audio} id={`${icon}-player`} src={src}></audio>\r\n    </>;\r\n  }}</ConnectionContext.Consumer>\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport Button from './Button';\r\nimport './SoundBoard.css';\r\n\r\nexport default function () {\r\n  return <div class=\"grid\">\r\n    <Button icon=\"üëè\" src=\"/audio/clap.mp3\" />\r\n    <Button icon=\"ü•≥\" src=\"/audio/party.mp3\" />\r\n    <Button icon=\"ü§£\" src=\"/audio/laugh.mp3\" />\r\n    <Button icon=\"ü•Å\" src=\"/audio/drum.mp3\" />\r\n    <Button icon=\"üèÜ\" src=\"/audio/success.mp3\" />\r\n    <Button icon=\"ü§Ø\" src=\"/audio/wow.mp3\" />\r\n    <Button icon=\"üòÆ\" src=\"/audio/ooh.mp3\" />\r\n    <Button icon=\"ü§ë\" src=\"/audio/kaching.mp3\" />\r\n    <Button icon=\"ü•∫\" src=\"/audio/aww.mp3\" />\r\n    <Button icon=\"ü§î\" src=\"/audio/hmm.mp3\" />\r\n    <Button icon=\"ü§®\" src=\"/audio/huh.mp3\" />\r\n    <Button icon=\"ü•±\" src=\"/audio/yawn.mp3\" />\r\n    <Button icon=\"üòà\" src=\"/audio/evil.mp3\" />\r\n    <Button icon=\"ü§¶\" src=\"/audio/facepalm.mp3\" />\r\n    <Button icon=\"ü§¨\" src=\"/audio/boo.mp3\" />\r\n    <Button icon=\"üò±\" src=\"/audio/scream.mp3\" />\r\n    <Button icon=\"ü¶ó\" src=\"/audio/cricket.mp3\" />\r\n    <Button icon=\"ü¶ñ\" src=\"/audio/dinosaur.mp3\" />\r\n    <Button icon=\"üßè\" src=\"/audio/louder.mp3\" />\r\n    <Button icon=\"ü§´\" src=\"/audio/ssh.mp3\" />\r\n    <Button icon=\"üëç\" src=\"/audio/yes.mp3\" />\r\n    <Button icon=\"üëé\" src=\"/audio/no.mp3\" />\r\n    <Button icon=\"üôÜ\" src=\"/audio/right.mp3\" />\r\n    <Button icon=\"üôÖ\" src=\"/audio/wrong.mp3\" />\r\n  </div>;\r\n}","import React from 'react';\nimport ConnectionContext from './ConnectionContext';\nimport ConnectionStatus from './ConnectionStatus';\nimport SoundBoard from './SoundBoard';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      status: 'disconnected',\n    };\n\n    props.connection.onConnecting(() => this.setState({ status: 'connecting' }));\n    props.connection.onConnected(() => this.setState({ status: 'connected' }));\n    props.connection.onDisconnect(() => this.setState({ status: 'disconnected' }));\n  }\n\n  render() {\n    const { connection, roomState } = this.props;\n    const { status } = this.state;\n    return <ConnectionContext.Provider value={connection}>\n      {\n        status === 'connected'\n          ? <SoundBoard />\n          : <ConnectionStatus roomState={roomState} status={status} />\n      }      \n    </ConnectionContext.Provider>;\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Connection from './Connection';\n\nconst connection = new Connection();\n\nconst roomState = {\n  get() { return window.location.hash || ''; },\n  set(value) { window.location.hash = value; }\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <App roomState={roomState} connection={connection} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","import { HubConnectionBuilder } from '@microsoft/signalr';\r\n\r\nclass Connection {\r\n  constructor() {\r\n    this.playHandlers = {};\r\n    this.connectingHandler = () => {};\r\n    this.connectedHandler = () => {};\r\n    this.disconnectedHandler = () => {};\r\n  }\r\n\r\n  send(fx) {\r\n    this.connection.invoke('send', this.room, fx);\r\n  }\r\n\r\n  onPlay(action, callback) {\r\n    this.playHandlers[action] = callback;\r\n  }\r\n\r\n  onConnected(callback) {\r\n    this.connectedHandler = callback;\r\n  }\r\n\r\n  onConnecting(callback) {\r\n    this.connectingHandler = callback;\r\n  }\r\n\r\n  onDisconnect(callback) {\r\n    this.disconnectedHandler = callback;\r\n  }\r\n\r\n  connect(room) {\r\n    this.connectingHandler();\r\n\r\n    this.room = room;\r\n    this.connection = new HubConnectionBuilder()\r\n      .withUrl('/sound')\r\n      .build();\r\n\r\n    this.connection.on('join', () => console.log('Somebody joined'));\r\n    this.connection.on('play', fx => {\r\n      console.log('Playing', fx);\r\n      this.playHandlers[fx]();\r\n    });\r\n    this.connection.onclose(this.disconnectedHandler);\r\n\r\n    this.connection\r\n      .start()\r\n      .then(() => {\r\n        this.connectedHandler();\r\n        this.connection.invoke('join', room)\r\n      }).catch(error => {\r\n        console.error('Failed to connect', error.message);\r\n        this.disconnectedHandler();\r\n      });\r\n  }\r\n}\r\n\r\nexport default Connection;"],"sourceRoot":""}